(this["webpackJsonptwitter-frontend"]=this["webpackJsonptwitter-frontend"]||[]).push([[0],{151:function(e,t,n){},178:function(e,t){},180:function(e,t){},190:function(e,t){},192:function(e,t){},219:function(e,t){},221:function(e,t){},222:function(e,t){},227:function(e,t){},229:function(e,t){},235:function(e,t){},237:function(e,t){},256:function(e,t){},268:function(e,t){},271:function(e,t){},274:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),c=n(24),r=n.n(c),o=(n(151),n(19)),i=n(6),l=n(9),u=n.n(l),d=n(138),b=n.n(d),j=n(17),m=n(47),p=n.n(m),h=function(){var e=Object(o.a)(u.a.mark((function e(t,n,s){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p()({url:"https://twitter-square-boat.herokuapp.com"+t,headers:{Authorization:"Bearer ".concat(s)},params:n||{}});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,s){return e.apply(this,arguments)}}(),f=h,O=function(){var e=Object(o.a)(u.a.mark((function e(t,n,s,a){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p()({url:"https://twitter-square-boat.herokuapp.com"+t,method:"POST",headers:{Authorization:"Bearer ".concat(a)},params:n||{},data:s||{}});case 3:return c=e.sent,e.abrupt("return",c);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,s,a){return e.apply(this,arguments)}}(),x={get:f,post:O},g=a.a.createContext({token:"",loggedIn:!1,user:{},history:{},location:{}}),v=n(1),w=function(e){var t=e.message,n=void 0===t?"Default Message":t,a=(e.username,e.user),c=void 0===a?{}:a,r=e.likes,o=e.id,i=e.onChange,l=e.postedOn,u=e.liked,d=Object(s.useContext)(g);return Object(v.jsxs)("div",{className:"card post",style:{display:"flex",wordBreak:"break-all",padding:"20px 20px"},children:[c._id===d.user._id?Object(v.jsx)("span",{children:"You"}):Object(v.jsx)(j.b,{to:"/user/".concat(c._id),children:Object(v.jsxs)("span",{style:{fontWeight:"bold"},children:["@",c.name]})}),Object(v.jsx)("span",{style:{fontSize:"10px"},children:b()(l).fromNow()}),Object(v.jsx)("div",{children:n}),Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:"btn post-controls btn-blue",onClick:function(e){var t=u?"/api/posts/dislike":"/api/posts/like";x.get(t,{postid:o},d.token).then((function(e){i&&i()}))},style:{transition:"all 0.2s ease-in-out",cursor:"pointer",marginTop:"10px",userSelect:"none"},children:u?Object(v.jsx)("div",{children:"\ud83d\udc4e ".concat(r," likes")}):Object(v.jsx)("div",{children:"\ud83d\udc4d ".concat(r," likes")})})})]})},k=(n(84),n(3)),N=n(11),y=n(277),C=["visible","message","success","onClose"],S=function(e){var t=e.visible,n=e.message,a=e.onClose,c=e.duration;return Object(s.useEffect)((function(){setTimeout((function(){a()}),c)}),[]),Object(v.jsxs)(y.a,{show:t,onClose:a,children:[Object(v.jsx)(y.a.Header,{children:Object(v.jsx)("strong",{className:"me-auto",children:"Notification"})}),Object(v.jsx)(y.a.Body,{children:n})]})},L=function(e){var t=e.visible,n=e.message,s=e.success,a=e.onClose,c=Object(N.a)(e,C);return t?Object(v.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:"1000",display:"flex",backgroundColor:"rgba(0,0,0,0.5)"},children:Object(v.jsx)(S,Object(k.a)({visible:t,message:n,success:s,onClose:a},c))}):null},I=function(e){var t=e.message,n=e.duration,a=void 0===n?3e3:n,c=Object(s.useState)(!0),r=Object(i.a)(c,2),o=r[0],l=r[1];return Object(v.jsx)(L,{visible:o,message:t,onClose:function(){l(!1)},duration:a})};var P=function(e){var t=Object(s.useState)(""),n=Object(i.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)(""),o=Object(i.a)(r,2),l=o[0],u=o[1],d=Object(s.useContext)(g);return Object(v.jsxs)("div",{className:"card bg-grey post-form mb-2",children:[Object(v.jsx)("label",{htmlFor:"name",children:Object(v.jsx)("strong",{children:"Add a new Post "})}),Object(v.jsx)("input",{type:"text-area",name:"message",className:"post-form-input",value:a,placeholder:"What are you thinking.....",onChange:function(e){c(e.target.value)}}),Object(v.jsx)("button",{className:"btn btn-blue mt-3",type:"submit",onClick:function(t){a?x.post("/api/posts/create",{},{message:a},d.token).then((function(t){u("Added Post"),setTimeout((function(){u("")}),5e3),c(""),e.update&&e.update(),u(t.data.message)})).catch((function(t){u(t.response.data),setTimeout((function(){u("")}),5e3),c(""),e.update&&e.update()})):(u("Please Enter a Message"),setTimeout((function(){u("")}),5e3))},children:"Add Post"}),l?Object(v.jsx)(I,{message:l}):null]})},F=function(e){var t=document.location.pathname.includes("following"),n=Object(s.useContext)(g),a=Object(s.useState)([]),c=Object(i.a)(a,2),r=c[0],o=c[1],l=t?"/api/posts/following":"/api/posts";Object(s.useEffect)((function(){x.get(l,{},n.token).then((function(e){o(e.data)}))}),[n]);var u=function(){x.get(l,{},n.token).then((function(e){o(e.data)}))},d=r.map((function(e){var t=e.message,s=e.user,a=(e.email,e.likes),c=(e.id,e.likeCount),r=void 0===c?0:c,o=e._id,i=e.postedOn,l=a.find((function(e){return n.user._id===e._id}));return Object(v.jsx)(w,{message:t,username:s.name,user:s,likes:r,id:o,onChange:u,postedOn:i,liked:l},o)}));return Object(v.jsxs)("div",{className:"posts",children:[Object(v.jsx)(P,{update:u}),d.length?d:Object(v.jsx)("h1",{children:"No Posts Found"})]})},T=n(49),E=n.n(T),H=function(e){var t=Object(s.useState)(""),n=Object(i.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)({}),l=Object(i.a)(r,2),d=l[0],b=l[1],j=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,s,a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.password1,s=d.password2,!(n.length<8&&n!==s)){e.next=6;break}c("Passwords must be equal and at least 8 characters long"),e.next=15;break;case 6:return a=E.a.createHash("sha256").update(n).digest("hex"),r=E.a.createHash("sha256").update(s).digest("hex"),d.password1=a,d.password2=r,c("Signing Up.....Please wait!"),e.next=13,x.post("/api/users/register",{},Object(k.a)({},d));case 13:"ok"===(o=e.sent).data.status?(c("Sign Up Successfull, Redirecting..."),setTimeout((function(){c(""),document.location="/"}),3e3)):(c(o.data.message),setTimeout((function(){c("")}),7e3));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"container p-5",style:{width:"30vw",marginTop:"10vh",backgroundColor:"white"},children:[Object(v.jsx)("h1",{className:"text-center",children:"Sign Up"}),a?Object(v.jsx)(I,{message:a,duration:5e3}):null,Object(v.jsxs)("div",{className:"mb-2",children:[Object(v.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",onChange:function(e){return b((function(t){return Object(k.a)(Object(k.a)({},t),{},{name:e.target.value})}))}})]}),Object(v.jsxs)("div",{className:"mb-3",children:[Object(v.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email address"}),Object(v.jsx)("input",{type:"email",name:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",onChange:function(e){return b((function(t){return Object(k.a)(Object(k.a)({},t),{},{email:e.target.value})}))}}),Object(v.jsx)("div",{id:"emailHelp",className:"form-text",children:"We'll never share your email with anyone else."})]}),Object(v.jsxs)("div",{className:"mb-2",children:[Object(v.jsx)("label",{htmlFor:"dob",className:"form-label",children:"Date Of Birth"}),Object(v.jsx)("input",{type:"date",className:"form-control",id:"dob",name:"dob",onChange:function(e){return b((function(t){return Object(k.a)(Object(k.a)({},t),{},{dob:e.target.value})}))}})]}),Object(v.jsxs)("div",{className:"mb-2",children:[Object(v.jsx)("label",{htmlFor:"password1",className:"form-label",children:"Password"}),Object(v.jsx)("input",{type:"password",className:"form-control",id:"password1",name:"password1",onChange:function(e){return b((function(t){return Object(k.a)(Object(k.a)({},t),{},{password1:e.target.value})}))}})]}),Object(v.jsxs)("div",{className:"mb-2",children:[Object(v.jsx)("label",{htmlFor:"password2",className:"form-label",children:"Confirm Password"}),Object(v.jsx)("input",{type:"password",className:"form-control",id:"password2",name:"password2",onChange:function(e){return b((function(t){return Object(k.a)(Object(k.a)({},t),{},{password2:e.target.value})}))}})]}),Object(v.jsx)("div",{className:"d-grid gap-2 mt-4",children:Object(v.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:j,children:"Submit"})})]})},_=n(4),B=function(e){var t=Object(s.useContext)(g);return Object(v.jsx)("nav",{className:"navbar-expand navbar bg-dark",children:Object(v.jsxs)("div",{className:"container-fluid",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",color:"white"},children:[Object(v.jsxs)("div",{className:"nav-links",style:{display:"flex",flexDirection:"row",minWidth:"15%",alignItems:"center",justifyContent:"space-around"},children:[Object(v.jsx)(j.b,{className:"brandLogo navLink",to:"/",children:"Twitter"}),t.loggedIn?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(j.b,{className:"navLink",to:"/",children:"Home"}),Object(v.jsx)(j.b,{className:"navLink",to:"/following",children:"Following"})]}):null]}),Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:"login-controls",style:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",minWidth:"20%"},children:t.loggedIn?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("span",{children:["Hello, ",t.user.name]}),Object(v.jsx)("button",{className:"btn btn-danger mx-2",onClick:e.onLogout,children:"Logout"})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(j.b,{className:"navLink",style:{marginRight:"5px"},to:"/register",children:"Register"}),Object(v.jsx)(j.b,{className:"navLink",style:{marginLeft:"5px"},to:"/login",children:"Login"})]})})})]})})},q=n(49),A=function(e){var t=Object(s.useState)(""),n=Object(i.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)(""),l=Object(i.a)(r,2),d=l[0],b=l[1],j=Object(s.useState)(""),m=Object(i.a)(j,2),p=m[0],h=m[1],f=Object(s.useContext)(g),O=function(){var t=Object(o.a)(u.a.mark((function t(n){var s,c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a&&d){t.next=5;break}h("Please Enter Email or Password"),setTimeout((function(){h("")}),7e3),t.next=19;break;case 5:if(!(d.length<8)){t.next=10;break}h("Password must be at least 8 characters long"),setTimeout((function(){h("")}),7e3),t.next=19;break;case 10:return s={},c=q.createHash("sha256").update(d).digest("hex"),s.email=a,s.password=c,h("Logging In........."),t.next=17,x.post("/api/users/login",{},s);case 17:"error"===(r=t.sent).data.status?(h(r.data.message),setTimeout((function(){h("")}),7e3)):(e.onLogin(r.data.token,r.data.user),document.location="/");case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return f.loggedIn?null:Object(v.jsxs)("div",{className:"container p-3 border border-2",style:{width:"30vw",backgroundColor:"white",borderRadius:"10px",marginTop:"10vh"},children:[Object(v.jsx)("h1",{className:"text-center",children:"Login"}),Object(v.jsxs)("div",{className:"mb-2",children:[Object(v.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"email",name:"email",value:a,onChange:function(e){return c(e.target.value)},required:!0})]}),Object(v.jsxs)("div",{className:"mb-2",children:[Object(v.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(v.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",required:!0,onChange:function(e){return b(e.target.value)}})]}),Object(v.jsx)("div",{className:"d-grid gap-2 mt-4",children:Object(v.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:O,children:"Submit"})}),p?Object(v.jsx)(I,{success:!0,message:p}):null]})},D=function(){var e=Object(s.useContext)(g),t=Object(s.useState)({}),n=Object(i.a)(t,2),a=n[0],c=n[1],r=a.followers,o=(void 0===r?[]:r).find((function(t){return t._id.toString()===e.user._id.toString()}));o=Boolean(o);var l=Object(_.h)();Object(s.useEffect)((function(){x.get("/api/users/get/".concat(l.userid),{},e.token).then((function(e){c(e.data)}))}),[]);return Object(v.jsxs)("div",{className:"user-profile",children:[Object(v.jsx)("img",{className:"user-img",src:"https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=200",alt:"user"}),Object(v.jsx)("h1",{children:a.name}),Object(v.jsx)("button",{className:"btn ".concat(o?"btn-red":"btn-blue"),onClick:function(){var t="/api/users/".concat(o?"unfollow":"follow","/").concat(l.userid);x.post(t,{},{},e.token).then((function(e){c(e.data.result)}))},children:o?"Unfollow":"Follow"})]})};var W=function(e){var t=e.loggedIn,n=e.children;return t?n:Object(v.jsx)(_.a,{to:"/login"})},z=function(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)({}),r=Object(i.a)(c,2),l=r[0],d=r[1],b=Object(s.useState)(""),m=Object(i.a)(b,2),p=m[0],h=m[1],f=function(e,t){localStorage.setItem("token",e),a(!0),h(e),d(t)};Object(s.useEffect)((function(){var e=localStorage.getItem("token");e&&x.get("/api/users/validate",{},e).then((function(t){"ok"===t.data.status&&(d(t.data.user),h(e),a(!0))}))}),[]);var O=function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/api/users/logout",{},p);case 2:"ok"===e.sent.data.status&&(localStorage.setItem("token",""),d({}),a(!1),h(""));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(g.Provider,{value:{token:p,loggedIn:n,user:l},children:Object(v.jsxs)(j.a,{children:[Object(v.jsx)(B,{onLogout:O}),Object(v.jsxs)(_.d,{children:[Object(v.jsx)(_.b,{exact:!0,path:"/",element:Object(v.jsx)(W,{loggedIn:n,children:Object(v.jsx)(F,{})})}),Object(v.jsx)(_.b,{exact:!0,path:"/register",element:n?Object(v.jsx)(_.a,{to:"/"}):Object(v.jsx)(H,{})}),Object(v.jsx)(_.b,{exact:!0,path:"/following",element:n?Object(v.jsx)(F,{following:!0}):Object(v.jsx)(A,{onLogin:f})}),Object(v.jsx)(_.b,{exact:!0,path:"/user",children:Object(v.jsx)(_.b,{path:":userid",element:n?Object(v.jsx)(D,{following:!0}):Object(v.jsx)(A,{onLogin:f})})}),Object(v.jsx)(_.b,{exact:!0,path:"/login",element:n?Object(v.jsx)(_.a,{to:"/"}):Object(v.jsx)(A,{onLogin:f})})]})]})})};r.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(z,{})}),document.getElementById("root"))},84:function(e,t,n){}},[[274,1,2]]]);
//# sourceMappingURL=main.e18f081f.chunk.js.map